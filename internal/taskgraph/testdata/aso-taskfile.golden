digraph {
  "asoctl:build" [
    color="black"
    label="{asoctl:build | Generate the \{\{.ASOCTL_APP\}\} \nbinary.}"
    shape="Mrecord"
  ]
  
  "asoctl:ci" [
    color="black"
    label="asoctl:ci"
    shape="Mrecord"
  ]
  "asoctl:ci" -> "asoctl:unit-tests-cover" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:ci" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:ci" -> "asoctl:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "asoctl:format-code" [
    color="black"
    label="{asoctl:format-code | Ensure all code for asoctl is \nformatted}"
    shape="Mrecord"
  ]
  
  "asoctl:go-mod-tidy" [
    color="black"
    label="{asoctl:go-mod-tidy | Tidy the go.mod file}"
    shape="Mrecord"
  ]
  
  "asoctl:lint" [
    color="black"
    label="{asoctl:lint | Run \{\{.ASOCTL_APP\}\} fast \nlint checks.}"
    shape="Mrecord"
  ]
  
  "asoctl:make-release-artifacts" [
    color="black"
    label="{asoctl:make-release-artifacts | Produce asoctl files required for \nan ASOv2 release}"
    shape="Mrecord"
  ]
  "asoctl:make-release-artifacts" -> "controller:run-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "asoctl:make-release-artifacts" -> "asoctl:build" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:make-release-artifacts" -> "asoctl:build" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:make-release-artifacts" -> "asoctl:build" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:make-release-artifacts" -> "asoctl:build" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:make-release-artifacts" -> "asoctl:build" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "asoctl:quick-checks" [
    color="black"
    label="asoctl:quick-checks"
    shape="Mrecord"
  ]
  "asoctl:quick-checks" -> "asoctl:unit-tests" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:quick-checks" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "asoctl:quick-checks" -> "asoctl:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "asoctl:unit-tests" [
    color="black"
    label="{asoctl:unit-tests | Run \{\{.ASOCTL_APP\}\} unit \ntests.}"
    shape="Mrecord"
  ]
  "asoctl:unit-tests" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "asoctl:unit-tests-cover" [
    color="black"
    label="{asoctl:unit-tests-cover | Run \{\{.ASOCTL_APP\}\} unit tests and \noutput coverage.}"
    shape="Mrecord"
  ]
  "asoctl:unit-tests-cover" -> "setup" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "asoctl:unit-tests-cover" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "asoctl:unit-tests-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "az-login" [
    color="black"
    label="{az-login | Runs AZ login. In the context of GitHub \nactions, uses an MSI token, in a local \n(non-actions) context, uses an \ninteractive login}"
    shape="Mrecord"
  ]
  
  "basic-checks" [
    color="black"
    label="basic-checks"
    shape="Mrecord"
  ]
  "basic-checks" -> "header-check" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "basic-checks" -> "specifier-check" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "build-docs-site" [
    color="black"
    label="build-docs-site"
    shape="Mrecord"
  ]
  "build-docs-site" -> "doc:build-site" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "build-mangle-test" [
    color="black"
    label="{build-mangle-test | Builds the tool we use for \nmangling test results}"
    shape="Mrecord"
  ]
  
  "ci" [
    color="black"
    label="{ci | Run all CI checks.}"
    shape="Mrecord"
  ]
  "ci" -> "generator:ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "ci" -> "controller:ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "ci" -> "crossplane:ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "ci" -> "asoctl:ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "ci" -> "format-code" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "ci" -> "verify-no-changes" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "ci-live" [
    color="black"
    label="{ci-live | Run all CI checks with live Azure \nresources. Requires that auth \nenvironment variables are set.}"
    shape="Mrecord"
  ]
  "ci-live" -> "generator:ci" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "ci-live" -> "controller:ci-live" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "cleanup-azure-resources" [
    color="black"
    label="{cleanup-azure-resources | Removes any resources created by the \nintegration tests.}"
    shape="Mrecord"
  ]
  "cleanup-azure-resources" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "cleanup-old-live-azure-resources" [
    color="black"
    label="{cleanup-old-live-azure-resources | Removes any old resources created by the \nintegration tests (old means older than \n3 hours).}"
    shape="Mrecord"
  ]
  "cleanup-old-live-azure-resources" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:acr-protect-image" [
    color="black"
    label="{controller:acr-protect-image | Protects an existing image in ACR from \nbeing updated or deleted}"
    shape="Mrecord"
  ]
  "controller:acr-protect-image" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:aks-create" [
    color="black"
    label="{controller:aks-create | Creates an AKS cluster}"
    shape="Mrecord"
  ]
  "controller:aks-create" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:aks-create-helm-install" [
    color="black"
    label="{controller:aks-create-helm-install | Deploys ASO onto an AKS \ncluster}"
    shape="Mrecord"
  ]
  "controller:aks-create-helm-install" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:aks-create-helm-install" -> "controller:aks-create" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:aks-create-helm-install" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:aks-create-helm-install" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:aks-create-helm-install" -> "controller:docker-push-multiarch" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:aks-create-helm-install" -> "controller:package-helm-manifest" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:aks-create-helm-install" -> "controller:install-helm-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:aks-delete" [
    color="black"
    label="{controller:aks-delete | Deletes an AKS cluster}"
    shape="Mrecord"
  ]
  "controller:aks-delete" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:build" [
    color="black"
    label="{controller:build | Generate the \n\{\{.CONTROLLER_APP\}\} binary.}"
    shape="Mrecord"
  ]
  "controller:build" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:bundle-crds" [
    color="black"
    label="{controller:bundle-crds | Bundles CRDs...}"
    shape="Mrecord"
  ]
  "controller:bundle-crds" -> "controller:generate-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:check-crd-size" [
    color="black"
    label="{controller:check-crd-size | Check that generated CRDs are not too \nlarge for Kubernetes}"
    shape="Mrecord"
  ]
  "controller:check-crd-size" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:ci" [
    color="black"
    label="controller:ci"
    shape="Mrecord"
  ]
  "controller:ci" -> "controller:verify-samples" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci" -> "controller:test-cover" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci" -> "controller:test-integration-ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci" -> "controller:check-crd-size" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci" -> "controller:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:ci-integration-tests" [
    color="black"
    label="controller:ci-integration-tests"
    shape="Mrecord"
  ]
  "controller:ci-integration-tests" -> "cleanup-old-live-azure-resources" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-integration-tests" -> "controller:test-integration-kind-ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-integration-tests" -> "controller:test-multitenant-integration-kind-ci" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-integration-tests" -> "cleanup-old-live-azure-resources" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:ci-live" [
    color="black"
    label="controller:ci-live"
    shape="Mrecord"
  ]
  "controller:ci-live" -> "controller:test-integration-ci-live" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-live" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-live" -> "controller:check-crd-size" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:ci-live" -> "controller:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:create-mi-for-workload-identity" [
    color="black"
    label="{controller:create-mi-for-workload-identity | Creates a managed identity and federated \nidentity credential and stores their \ndetails in the specified path}"
    shape="Mrecord"
  ]
  "controller:create-mi-for-workload-identity" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:delete-helm" [
    color="black"
    label="{controller:delete-helm | Delete helm release}"
    shape="Mrecord"
  ]
  
  "controller:deploy-multitenant-testing-secret" [
    color="black"
    label="{controller:deploy-multitenant-testing-secret | Deploy a multitenant \ntesting secret}"
    shape="Mrecord"
  ]
  
  "controller:docker-build" [
    color="black"
    label="{controller:docker-build | Builds the \{\{.CONTROLLER_APP\}\} \nDocker image.}"
    shape="Mrecord"
  ]
  "controller:docker-build" -> "controller:bundle-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:docker-build-and-save" [
    color="black"
    label="{controller:docker-build-and-save | Builds the \{\{.CONTROLLER_APP\}\} Docker \nimage and saves it using docker save.}"
    shape="Mrecord"
  ]
  "controller:docker-build-and-save" -> "controller:docker-build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:docker-push-local" [
    color="black"
    label="{controller:docker-push-local | Pushes the controller container image \nto a local registry}"
    shape="Mrecord"
  ]
  "controller:docker-push-local" -> "controller:bundle-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:docker-push-multiarch" [
    color="black"
    label="{controller:docker-push-multiarch | Builds, tags and pushes the multi \narchitecture controller container image \nto repository}"
    shape="Mrecord"
  ]
  "controller:docker-push-multiarch" -> "controller:bundle-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:docker-push-multiarch" -> "docker-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:format-code" [
    color="black"
    label="{controller:format-code | Ensure all code for the \ncontroller is formatted}"
    shape="Mrecord"
  ]
  
  "controller:gen-crd-docs" [
    color="black"
    label="controller:gen-crd-docs"
    shape="Mrecord"
  ]
  "controller:gen-crd-docs" -> "doc:crd-api" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:generate-crds" [
    color="black"
    label="{controller:generate-crds | Run controller-gen to generate \n\{\{.CONTROLLER_APP\}\} CRD files.}"
    shape="Mrecord"
  ]
  "controller:generate-crds" -> "controller:generate-types" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:generate-crds" -> "controller:generate-genruntime-deepcopy" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:generate-genruntime-deepcopy" [
    color="black"
    label="{controller:generate-genruntime-deepcopy | Run controller-gen to generate \n\{\{.CONTROLLER_APP\}\} CRD files.}"
    shape="Mrecord"
  ]
  
  "controller:generate-kustomize" [
    color="black"
    label="{controller:generate-kustomize | Run \{\{.GENERATOR_APP\}\} to generate the \nKustomize file for registering CRDs.}"
    shape="Mrecord"
  ]
  "controller:generate-kustomize" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:generate-types" [
    color="black"
    label="{controller:generate-types | Run \{\{.GENERATOR_APP\}\} to generate input \nfiles for controller-gen for \n\{\{.CONTROLLER_APP\}\}.}"
    shape="Mrecord"
  ]
  "controller:generate-types" -> "generator:build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:go-mod-tidy" [
    color="black"
    label="{controller:go-mod-tidy | Tidy the go.mod file}"
    shape="Mrecord"
  ]
  
  "controller:install" [
    color="black"
    label="{controller:install | Installs the controller, webhooks, and \nCRDs into the default kubectl cluster}"
    shape="Mrecord"
  ]
  "controller:install" -> "controller:generate-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:install-cert-manager" [
    color="black"
    label="{controller:install-cert-manager | Installs cert manager}"
    shape="Mrecord"
  ]
  
  "controller:install-helm-single-tenant" [
    color="black"
    label="{controller:install-helm-single-tenant | Generate and install helm chart on \ncluster using workload identity}"
    shape="Mrecord"
  ]
  
  "controller:install-helm-wi" [
    color="black"
    label="{controller:install-helm-wi | Generate and install helm chart on \ncluster using workload identity}"
    shape="Mrecord"
  ]
  "controller:install-helm-wi" -> "controller:wait-for-operator-ready" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-create" [
    color="black"
    label="{controller:kind-create | Creates a kind cluster and local Docker \nregistry. Images in the local registry \ncan be pulled in the kind cluster}"
    shape="Mrecord"
  ]
  
  "controller:kind-create-helm-workload-identity" [
    color="black"
    label="{controller:kind-create-helm-workload-identity | Creates a local kind cluster with \nWorkload identity installed alongside \nASO helm chart using UMI auth.}"
    shape="Mrecord"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:docker-push-local" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:package-helm-manifest" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-helm-workload-identity" -> "controller:install-helm-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-create-multitenant-cluster" [
    color="black"
    label="{controller:kind-create-multitenant-cluster | Creates a local kind cluster with ASO \ninstalled in multitenant configuration.}"
    shape="Mrecord"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:make-multitenant-files" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:docker-push-local" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:wait-for-operator-ready" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster" -> "controller:deploy-multitenant-testing-secret" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-create-multitenant-cluster-helm" [
    color="black"
    label="{controller:kind-create-multitenant-cluster-helm | Creates a local kind cluster Helm and \nASO in multitenant configuration.}"
    shape="Mrecord"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:docker-push-local" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:package-helm-manifest" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:wait-for-operator-ready" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-multitenant-cluster-helm" -> "controller:install-helm-single-tenant" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-create-wi" [
    color="black"
    label="{controller:kind-create-wi | Creates a kind cluster and local Docker \nregistry with OIDC + workload identity \nenabled. Images in the local registry \ncan be pulled in the kind cluster.}"
    shape="Mrecord"
  ]
  "controller:kind-create-wi" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:kind-create-with-workload-identity" [
    color="black"
    label="{controller:kind-create-with-workload-identity | Creates a local kind cluster in workload \nidentity mode with ASO using a managed \nidentity.}"
    shape="Mrecord"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:docker-push-local" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:install" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:make-workload-identity-secret" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-with-workload-identity" -> "controller:wait-for-operator-ready" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-create-workloadidentity-local-helm" [
    color="black"
    label="{controller:kind-create-workloadidentity-local-helm | Creates a local kind cluster with \nWorkload identity installed alongside \nthe local ASO helm chart. Does NOT build \nthe Helm chart, it expects that it has \nalready been built. Does NOT swap the \nimage for a local copy.}"
    shape="Mrecord"
  ]
  "controller:kind-create-workloadidentity-local-helm" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-workloadidentity-local-helm" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-workloadidentity-local-helm" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:kind-create-workloadidentity-local-helm" -> "controller:install-helm-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:kind-delete" [
    color="black"
    label="{controller:kind-delete | Deletes a kind cluster}"
    shape="Mrecord"
  ]
  
  "controller:lint" [
    color="black"
    label="{controller:lint | Run lint checks.}"
    shape="Mrecord"
  ]
  "controller:lint" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:make-multitenant-files" [
    color="black"
    label="{controller:make-multitenant-files | Splits the deployment yaml into cluster \nand tenant files for multitenant \ndeployment}"
    shape="Mrecord"
  ]
  "controller:make-multitenant-files" -> "controller:run-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:make-sp-secret" [
    color="black"
    label="{controller:make-sp-secret | Creates a service principal \naso-controller-settings secret for \ntesting purposes}"
    shape="Mrecord"
  ]
  
  "controller:make-workload-identity-secret" [
    color="black"
    label="{controller:make-workload-identity-secret | Creates a workload identity secret \nfor testing purposes}"
    shape="Mrecord"
  ]
  
  "controller:package-helm-manifest" [
    color="black"
    label="{controller:package-helm-manifest | Package helm manifest for \nthe release}"
    shape="Mrecord"
  ]
  "controller:package-helm-manifest" -> "controller:generate-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:package-helm-manifest" -> "controller:validate-helm" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:quick-checks" [
    color="black"
    label="controller:quick-checks"
    shape="Mrecord"
  ]
  "controller:quick-checks" -> "controller:test" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:quick-checks" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:quick-checks" -> "controller:check-crd-size" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:quick-checks" -> "controller:verify-samples" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:quick-checks" -> "controller:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:run-kustomize" [
    color="black"
    label="{controller:run-kustomize | Generates the CRD & \nconfiguration bundle.}"
    shape="Mrecord"
  ]
  "controller:run-kustomize" -> "controller:generate-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:run-kustomize-for-envtest" [
    color="black"
    label="{controller:run-kustomize-for-envtest | Generates the CRDs for use \nin envtest}"
    shape="Mrecord"
  ]
  "controller:run-kustomize-for-envtest" -> "controller:generate-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:scan-image" [
    color="black"
    label="{controller:scan-image | Builds a local image and scans the \nimage using trivy}"
    shape="Mrecord"
  ]
  "controller:scan-image" -> "controller:docker-build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test" [
    color="black"
    label="{controller:test | Run \{\{.CONTROLLER_APP\}\} \nunit tests.}"
    shape="Mrecord"
  ]
  "controller:test" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test" -> "controller:run-kustomize-for-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test" -> "controller:bundle-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-cover" [
    color="black"
    label="{controller:test-cover | Run \{\{.CONTROLLER_APP\}\} unit tests \nand output coverage.}"
    shape="Mrecord"
  ]
  "controller:test-cover" -> "setup" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-cover" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-cover" -> "controller:bundle-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-integration-ci" [
    color="black"
    label="{controller:test-integration-ci | Run integration tests \nfor CI}"
    shape="Mrecord"
  ]
  "controller:test-integration-ci" -> "controller:test-integration-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-ci-live" [
    color="black"
    label="{controller:test-integration-ci-live | Run integration tests for CI \nin live mode}"
    shape="Mrecord"
  ]
  "controller:test-integration-ci-live" -> "controller:test-integration-envtest-live" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-envtest" [
    color="black"
    label="{controller:test-integration-envtest | Run integration tests with envtest \nusing record/replay.}"
    shape="Mrecord"
  ]
  "controller:test-integration-envtest" -> "controller:run-kustomize-for-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-envtest-cover" [
    color="black"
    label="{controller:test-integration-envtest-cover | Run integration tests with envtest using \nrecord/replay and output coverage.}"
    shape="Mrecord"
  ]
  "controller:test-integration-envtest-cover" -> "setup" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-integration-envtest-cover" -> "controller:run-kustomize-for-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-integration-envtest-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-integration-envtest-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-integration-envtest-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-integration-envtest-live" [
    color="black"
    label="{controller:test-integration-envtest-live | Run integration tests with envtest \nagainst live data and output coverage.}"
    shape="Mrecord"
  ]
  "controller:test-integration-envtest-live" -> "controller:run-kustomize-for-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-integration-envtest-live" -> "cleanup-azure-resources" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-envtest-record" [
    color="black"
    label="{controller:test-integration-envtest-record | Run integration tests with envtest with \na longer timeout suitable for recording \nthe tests.}"
    shape="Mrecord"
  ]
  "controller:test-integration-envtest-record" -> "controller:run-kustomize-for-envtest" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-kind" [
    color="black"
    label="{controller:test-integration-kind | Run live integration tests \nin kind.}"
    shape="Mrecord"
  ]
  "controller:test-integration-kind" -> "controller:kind-create-helm-workload-identity" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-integration-kind-ci" [
    color="black"
    label="{controller:test-integration-kind-ci | Run live integration tests in kind and \ndeletes the kind cluster afterwards.}"
    shape="Mrecord"
  ]
  "controller:test-integration-kind-ci" -> "controller:kind-create-helm-workload-identity" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-integration-kind-ci" -> "controller:kind-delete" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-multitenant-integration-kind" [
    color="black"
    label="{controller:test-multitenant-integration-kind | Run live multitenant integration \ntests in kind.}"
    shape="Mrecord"
  ]
  "controller:test-multitenant-integration-kind" -> "controller:kind-create-multitenant-cluster-helm" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-multitenant-integration-kind-ci" [
    color="black"
    label="{controller:test-multitenant-integration-kind-ci | Run live multitenant integration \ntests in kind.}"
    shape="Mrecord"
  ]
  "controller:test-multitenant-integration-kind-ci" -> "controller:kind-create-multitenant-cluster-helm" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:test-multitenant-integration-kind-ci" -> "controller:kind-delete" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-upgrade" [
    color="black"
    label="{controller:test-upgrade | Test upgrading \{\{.CONTROLLER_APP\}\} and \nhelm chart for new release}"
    shape="Mrecord"
  ]
  "controller:test-upgrade" -> "controller:test-upgrade-setup" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade" -> "controller:test-upgrade-pre" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade" -> "controller:test-upgrade-post" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-upgrade-apply-prerelease-chart" [
    color="black"
    label="{controller:test-upgrade-apply-prerelease-chart | Apply the \{\{.CONTROLLER_APP\}\} prerelease \nchart for new release}"
    shape="Mrecord"
  ]
  "controller:test-upgrade-apply-prerelease-chart" -> "controller:docker-push-local" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-apply-prerelease-chart" -> "controller:package-helm-manifest" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-apply-prerelease-chart" -> "controller:install-helm-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-upgrade-post" [
    color="black"
    label="{controller:test-upgrade-post | Test upgrading \{\{.CONTROLLER_APP\}\} and \nhelm chart for new release}"
    shape="Mrecord"
  ]
  "controller:test-upgrade-post" -> "controller:test-upgrade-apply-prerelease-chart" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-post" -> "controller:kind-delete" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-upgrade-pre" [
    color="black"
    label="{controller:test-upgrade-pre | Test upgrading \{\{.CONTROLLER_APP\}\} and \nhelm chart for new release}"
    shape="Mrecord"
  ]
  "controller:test-upgrade-pre" -> "controller:test-upgrade-pre-setup" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:test-upgrade-pre-setup" [
    color="black"
    label="{controller:test-upgrade-pre-setup | Setup for the \ntest-upgrade-pre step}"
    shape="Mrecord"
  ]
  "controller:test-upgrade-pre-setup" -> "controller:wait-for-operator-ready" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:test-upgrade-setup" [
    color="black"
    label="{controller:test-upgrade-setup | Setup for upgrade test}"
    shape="Mrecord"
  ]
  "controller:test-upgrade-setup" -> "controller:kind-create-wi" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-setup" -> "controller:create-mi-for-workload-identity" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-setup" -> "controller:install-cert-manager" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "controller:test-upgrade-setup" -> "controller:package-helm-manifest" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "controller:validate-helm" [
    color="black"
    label="{controller:validate-helm | Validates and compares helm against the \nASO yaml generated by kustomize and \nensures that they match}"
    shape="Mrecord"
  ]
  "controller:validate-helm" -> "controller:run-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "controller:validate-helm" -> "scripts:build-python-venv" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:verify-samples" [
    color="black"
    label="{controller:verify-samples | Verify that a sample exists for each \nsupported resource}"
    shape="Mrecord"
  ]
  "controller:verify-samples" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "controller:wait-for-operator-ready" [
    color="black"
    label="{controller:wait-for-operator-ready | Waits for the operator and associated \nCRDs to be ready}"
    shape="Mrecord"
  ]
  
  "crossplane:ci" [
    color="black"
    label="crossplane:ci"
    shape="Mrecord"
  ]
  "crossplane:ci" -> "basic-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "crossplane:ci" -> "crossplane:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "crossplane:generate-crds" [
    color="black"
    label="{crossplane:generate-crds | Run controller-gen to generate \n\{\{.CROSSPLANE_APP\}\} CRD files.}"
    shape="Mrecord"
  ]
  "crossplane:generate-crds" -> "crossplane:generate-types" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "crossplane:generate-types" [
    color="black"
    label="{crossplane:generate-types | Run \{\{.GENERATOR_APP\}\} to generate input \nfiles for controller-gen for \n\{\{.CROSSPLANE_APP\}\}.}"
    shape="Mrecord"
  ]
  "crossplane:generate-types" -> "generator:build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "crossplane:quick-checks" [
    color="black"
    label="crossplane:quick-checks"
    shape="Mrecord"
  ]
  "crossplane:quick-checks" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "default" [
    color="black"
    label="default"
    shape="Mrecord"
  ]
  "default" -> "format-code" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "default" -> "quick-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "doc:build-site" [
    color="black"
    label="doc:build-site"
    shape="Mrecord"
  ]
  "doc:build-site" -> "doc:frontmatter-check" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "doc:crd-api" [
    color="black"
    label="{doc:crd-api | Generates API docs for \nCRDs}"
    shape="Mrecord"
  ]
  "doc:crd-api" -> "controller:generate-crds" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "doc:dependencies" [
    color="black"
    label="{doc:dependencies | Generate documentation for \ndepencencies}"
    shape="Mrecord"
  ]
  
  "doc:frontmatter-check" [
    color="black"
    label="{doc:frontmatter-check | Ensure all Markdown documentation \nhas frontmatter.}"
    shape="Mrecord"
  ]
  
  "doc:render-diagrams" [
    color="black"
    label="{doc:render-diagrams | Render all GraphViz \ndiagrams}"
    shape="Mrecord"
  ]
  
  "docker-login" [
    color="black"
    label="{docker-login | Docker login}"
    shape="Mrecord"
  ]
  "docker-login" -> "az-login" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "format-code" [
    color="black"
    label="{format-code | Ensure all code is \nformatted}"
    shape="Mrecord"
  ]
  "format-code" -> "asoctl:format-code" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "format-code" -> "generator:format-code" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "format-code" -> "controller:format-code" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "frontmatter-check" [
    color="black"
    label="frontmatter-check"
    shape="Mrecord"
  ]
  
  "generator:build" [
    color="black"
    label="{generator:build | Generate the \n\{\{.GENERATOR_APP\}\} binary.}"
    shape="Mrecord"
  ]
  
  "generator:ci" [
    color="black"
    label="generator:ci"
    shape="Mrecord"
  ]
  "generator:ci" -> "generator:unit-tests-cover" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "generator:ci" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "generator:ci" -> "generator:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "generator:diagrams" [
    color="black"
    label="generator:diagrams"
    shape="Mrecord"
  ]
  "generator:diagrams" -> "doc:render-diagrams" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "generator:format-code" [
    color="black"
    label="{generator:format-code | Ensure all code for the code \ngenerator is formatted}"
    shape="Mrecord"
  ]
  
  "generator:go-mod-tidy" [
    color="black"
    label="{generator:go-mod-tidy | Tidy the go.mod file}"
    shape="Mrecord"
  ]
  
  "generator:lint" [
    color="black"
    label="{generator:lint | Run \{\{.GENERATOR_APP\}\} lint \nchecks.}"
    shape="Mrecord"
  ]
  
  "generator:quick-checks" [
    color="black"
    label="generator:quick-checks"
    shape="Mrecord"
  ]
  "generator:quick-checks" -> "generator:unit-tests" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "generator:quick-checks" -> "basic-checks" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "generator:quick-checks" -> "generator:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "generator:unit-tests" [
    color="black"
    label="{generator:unit-tests | Run \{\{.GENERATOR_APP\}\} unit \ntests.}"
    shape="Mrecord"
  ]
  
  "generator:unit-tests-cover" [
    color="black"
    label="{generator:unit-tests-cover | Run \{\{.GENERATOR_APP\}\} unit tests and \noutput coverage.}"
    shape="Mrecord"
  ]
  "generator:unit-tests-cover" -> "setup" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "generator:unit-tests-cover" -> "produce-markdown-summary" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "generator:update-golden-tests" [
    color="black"
    label="{generator:update-golden-tests | Update \{\{.GENERATOR_APP\}\} golden \ntest outputs.}"
    shape="Mrecord"
  ]
  
  "go-mod-tidy" [
    color="black"
    label="{go-mod-tidy | Tidy the go.mod files}"
    shape="Mrecord"
  ]
  "go-mod-tidy" -> "controller:go-mod-tidy" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "go-mod-tidy" -> "asoctl:go-mod-tidy" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "go-mod-tidy" -> "generator:go-mod-tidy" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "header-check" [
    color="black"
    label="{header-check | Ensure all files have an appropriate \nlicense header.}"
    shape="Mrecord"
  ]
  
  "make-release-artifacts" [
    color="black"
    label="{make-release-artifacts | Produce files required for an \nASOv2 release}"
    shape="Mrecord"
  ]
  "make-release-artifacts" -> "controller:run-kustomize" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "make-release-artifacts" -> "controller:make-multitenant-files" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "make-release-artifacts" -> "asoctl:make-release-artifacts" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "mangle-test:lint" [
    color="black"
    label="{mangle-test:lint | Run mangle-test fast lint \nchecks.}"
    shape="Mrecord"
  ]
  
  "mangle-test:quick-checks" [
    color="black"
    label="mangle-test:quick-checks"
    shape="Mrecord"
  ]
  "mangle-test:quick-checks" -> "mangle-test:lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "produce-markdown-summary" [
    color="black"
    label="{produce-markdown-summary | Builds a test output summary \nfor Github}"
    shape="Mrecord"
  ]
  "produce-markdown-summary" -> "build-mangle-test" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "provision-oidc-storage-acct" [
    color="black"
    label="{provision-oidc-storage-acct | Creates a storage account for use in \nOIDC federation with a random name in \nresource group \"aso-wi-storage\"}"
    shape="Mrecord"
  ]
  
  "quick-checks" [
    color="black"
    label="{quick-checks | Perform all fast local \npre-commit tasks.}"
    shape="Mrecord"
  ]
  "quick-checks" -> "generator:quick-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "quick-checks" -> "controller:quick-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "quick-checks" -> "asoctl:quick-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "quick-checks" -> "crossplane:quick-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "quick-checks" -> "mangle-test:quick-checks" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "scripts:build-python-venv" [
    color="black"
    label="{scripts:build-python-venv | Creates a Python virtual \nenv}"
    shape="Mrecord"
  ]
  
  "setup" [
    color="black"
    label="{setup | Perform setup tasks}"
    shape="Mrecord"
  ]
  
  "specifier-check" [
    color="black"
    label="{specifier-check | Check that format specifiers %v and \n%+v are not used}"
    shape="Mrecord"
  ]
  
  "verify-no-changes" [
    color="black"
    label="{verify-no-changes | Checks that there are no uncommitted \nmodifications to files}"
    shape="Mrecord"
  ]
}
