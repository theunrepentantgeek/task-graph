digraph {
  "build" [
    color="black"
    fillcolor="powderblue"
    label="{build | Build everything}"
    shape="Mrecord"
    style="filled"
  ]
  "build" -> "build.bin" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "build.bin" [
    color="black"
    fillcolor="powderblue"
    label="{build.bin | Build the go-vcr-tidy \nbinary}"
    shape="Mrecord"
    style="filled"
  ]
  "build.bin" -> "build.dir" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "build.dir" [
    color="black"
    fillcolor="powderblue"
    label="{build.dir | Ensure our output folder exists \nand is empty}"
    shape="Mrecord"
    style="filled"
  ]
  
  "build.sbom" [
    color="black"
    fillcolor="powderblue"
    label="{build.sbom | Generate a \nsoftware-bill-of-materials (SBOM)}"
    shape="Mrecord"
    style="filled"
  ]
  "build.sbom" -> "build.bin" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "ci" [
    color="black"
    label="{ci | Run continuous integration \ntasks}"
    shape="Mrecord"
  ]
  "ci" -> "build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "ci" -> "test" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "ci" -> "build.sbom" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "default" [
    color="black"
    label="{default | Run all tasks}"
    shape="Mrecord"
  ]
  "default" -> "build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "default" -> "test" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "gremlins" [
    color="black"
    label="{gremlins | Use gremlins to check the quality \nof our tests}"
    shape="Mrecord"
  ]
  
  "lint" [
    color="black"
    fillcolor="aquamarine"
    label="{lint | Run golangci-lint to check for \nlinting issues}"
    shape="Mrecord"
    style="filled"
  ]
  
  "test" [
    color="black"
    fillcolor="aquamarine"
    label="{test | Run tests and checks}"
    shape="Mrecord"
    style="filled"
  ]
  "test" -> "unit-test" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  "test" -> "lint" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
  "tidy" [
    color="black"
    fillcolor="cornsilk"
    label="{tidy | Tidy up source}"
    shape="Mrecord"
    style="filled"
  ]
  "tidy" -> "tidy.gofumpt" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "tidy" -> "tidy.mod" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  "tidy" -> "tidy.lint" [
    color="blue"
    penwidth="1"
    style="dashed"
  ]
  
  "tidy.gofumpt" [
    color="black"
    fillcolor="cornsilk"
    label="{tidy.gofumpt | Run gofumpt to reformat \nsource code}"
    shape="Mrecord"
    style="filled"
  ]
  
  "tidy.lint" [
    color="black"
    fillcolor="cornsilk"
    label="{tidy.lint | Run golangci-lint in fix \nmode}"
    shape="Mrecord"
    style="filled"
  ]
  
  "tidy.mod" [
    color="black"
    fillcolor="cornsilk"
    label="{tidy.mod | Run go mod tidy}"
    shape="Mrecord"
    style="filled"
  ]
  
  "unit-test" [
    color="black"
    fillcolor="aquamarine"
    label="{unit-test | Run unit tests}"
    shape="Mrecord"
    style="filled"
  ]
  "unit-test" -> "build" [
    color="black"
    penwidth="1"
    style="solid"
  ]
  
}
